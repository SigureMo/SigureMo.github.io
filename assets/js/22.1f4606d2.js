(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{397:function(s,a,e){s.exports=e.p+"assets/img/Git_Collaboration01.927d0bca.png"},528:function(s,a,e){"use strict";e.r(a);var t=e(2),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("虽然平时写个笔记都会使用 Git 来保存，但常用的也就只有 "),t("code",[s._v("add")]),s._v("、"),t("code",[s._v("commit")]),s._v("、"),t("code",[s._v("push")]),s._v(" 等等简单的命令啦，偶尔出点问题都需要去现查，为了提高效率，我在这里整理一下简单的 Git 协作命令，以备不时之需ヽ(✿ ﾟ ▽ ﾟ)ノ")])]),s._v(" "),t("ul",[t("li",[s._v("预备知识\n"),t("ul",[t("li",[s._v("Git 基本命令")])])]),s._v(" "),t("li",[s._v("开发环境\n"),t("ul",[t("li",[t("code",[s._v("Git")])])])])]),s._v(" "),t("h2",{attrs:{id:"单人的工作模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单人的工作模式"}},[s._v("#")]),s._v(" 单人的工作模式")]),s._v(" "),t("p",[s._v("首先从最基本的简单单人工作模式，渐进地增加一些指令")]),s._v(" "),t("h3",{attrs:{id:"暂存文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#暂存文件"}},[s._v("#")]),s._v(" 暂存文件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" *\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"提交文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提交文件"}},[s._v("#")]),s._v(" 提交文件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"推送到远程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推送到远程"}},[s._v("#")]),s._v(" 推送到远程")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"使用-dev-分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-dev-分支"}},[s._v("#")]),s._v(" 使用 dev 分支")]),s._v(" "),t("p",[s._v("如果有一个需要做很久的功能，应当新建一个分支，以保证 "),t("code",[s._v("master")]),s._v(" 的稳定性")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"合并其余分支内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#合并其余分支内容"}},[s._v("#")]),s._v(" 合并其余分支内容")]),s._v(" "),t("p",[s._v("当在 "),t("code",[s._v("dev")]),s._v(" 分支上的工作完成后，回到 "),t("code",[s._v("master")]),s._v(" 并合并")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge --no-ff dev            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 dev 合并回 master")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -d dev                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除无用的 dev 分支")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("参数 --no-ff 的作用")]),s._v(" "),t("p",[s._v("如果你想保留下来临时分支的信息，可以增加 "),t("code",[s._v("--no-ff")]),s._v(" 参数，这将把临时分支的信息作为一次 commit 合并到目标分支，但同时也会保留临时分支的过程，下面的图一目了然")]),s._v(" "),t("p",[t("img",{attrs:{src:e(397),alt:""}})])]),s._v(" "),t("h2",{attrs:{id:"如何对待一个-fork-后的仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何对待一个-fork-后的仓库"}},[s._v("#")]),s._v(" 如何对待一个 fork 后的仓库")]),s._v(" "),t("p",[s._v("对于一个 fork 后的仓库，个人建议是"),t("strong",[s._v("不要在原来已经存在的分支上进行修改")]),s._v("，除非你并不想合并回原分支")]),s._v(" "),t("h3",{attrs:{id:"首先-clone-下来你的-repo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#首先-clone-下来你的-repo"}},[s._v("#")]),s._v(" 首先 clone 下来你的 repo")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@github.com:SigureMo/vuepress.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("当然，该 "),t("code",[s._v("repo")]),s._v(" 已经绑定在远程仓库 "),t("code",[s._v("origin")]),s._v(" 上了")]),s._v(" "),t("h3",{attrs:{id:"将原分支绑定在-upstream"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将原分支绑定在-upstream"}},[s._v("#")]),s._v(" 将原分支绑定在 upstream")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" upstream git@github.com:vuejs/vuepress.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这样，你的 "),t("code",[s._v("upstream")]),s._v(" 就代表了原作者的远程分支，而 "),t("code",[s._v("origin")]),s._v(" 就代表了你 fork 后的远程分支")]),s._v(" "),t("h3",{attrs:{id:"新建一个自己的分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建一个自己的分支"}},[s._v("#")]),s._v(" 新建一个自己的分支")]),s._v(" "),t("p",[s._v("比如你想修改 "),t("code",[s._v("master")]),s._v(" 分支，那么直接以此为基础新建分支就好")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果已经在 master 则跳过")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b feature/sigure   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建一个分支，名称随意")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("现在再 "),t("code",[s._v("git branch")]),s._v(" 一下就可以发现新建了一个 "),t("code",[s._v("feature/sigure")]),s._v(" 分支，并且已经切换到该分支了")]),s._v(" "),t("h3",{attrs:{id:"改动提交并推送"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改动提交并推送"}},[s._v("#")]),s._v(" 改动提交并推送")]),s._v(" "),t("p",[s._v("在你的 "),t("code",[s._v("feature/sigure")]),s._v(" 上进行修改，并 "),t("code",[s._v("commit")]),s._v(" 以及推送，推送的时候最好指定分支")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin feature/sigure   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 feature/sigure 推送到 origin （也就是你 fork 后的 repo）")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"在-github-发起-pr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在-github-发起-pr"}},[s._v("#")]),s._v(" 在 GitHub 发起 PR")]),s._v(" "),t("p",[s._v("如果你的修改想要合并回原作者分支，那么就发起 PR 吧，如果原作者 merge 了，你的 "),t("code",[s._v("feature/sigure")]),s._v(" 也可以删除了，后续从原作者那里重新获取 "),t("code",[s._v("master")]),s._v(" 就能拥有你的改动了")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -d feature/sigure              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果该分支已经没有作用了，可以直接删除")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin --delete feature/sigure   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同时删除远程分支")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"同步原作者更改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#同步原作者更改"}},[s._v("#")]),s._v(" 同步原作者更改")]),s._v(" "),t("p",[s._v("除了你的新分支，其余分支尽可能不要进行改动，这样保证了可以不需手动合并地同步原作者后续修改")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到 master")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" fetch upstream               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将原作者分支下载到本地")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge upstream/master        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将原作者 master 分支最新内容合并到本地 master")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"如何合并-pr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何合并-pr"}},[s._v("#")]),s._v(" 如何合并 PR")]),s._v(" "),t("p",[s._v("既然你能发起一个 PR ，那么你也有可能收到一个 PR ，如果发起 PR 的人能够按照上面的规范来做，并且能规范书写代码、规范提交 commit 的话，你可以很容易地在 GitHub 上判断是 close 还是直接 merge ，但如果对方的代码很不规范，则需要你手动对代码进行 merge")]),s._v(" "),t("h3",{attrs:{id:"拉取并放在新的分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拉取并放在新的分支"}},[s._v("#")]),s._v(" 拉取并放在新的分支")]),s._v(" "),t("p",[s._v("比如有这样的一个 PR "),t("code",[s._v("https://github.com/SigureMo/course-crawler/pull/6")]),s._v(" ，我们可以看到它的 PR id 为 6")]),s._v(" "),t("p",[s._v("那么我们就可以")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" fetch origin pull/6/head:dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这样就创建了一个新的分支 "),t("code",[s._v("dev")]),s._v(" 用以保存新的 PR 分支， "),t("code",[s._v("checkout")]),s._v(" 过去就可以看到该分支下的具体内容了，修改好后返回 "),t("code",[s._v("master")]),s._v(" 并 "),t("code",[s._v("merge")]),s._v(" 即可")]),s._v(" "),t("h3",{attrs:{id:"使用一个-commit-合并所有内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用一个-commit-合并所有内容"}},[s._v("#")]),s._v(" 使用一个 commit 合并所有内容")]),s._v(" "),t("p",[s._v("有时 PR 中 commit 信息太多，直接合并入 master 可能导致 commit 历史可读性降低，这种情况下使用一个 commit 提交所有内容更好些，常用的方法有两种")]),s._v(" "),t("p",[s._v("一种是 "),t("code",[s._v("squash")]),s._v("，它比较简单，直接在回到 "),t("code",[s._v("master")]),s._v(" 后 "),t("code",[s._v("merge")]),s._v(" 的时候加一个参数 "),t("code",[s._v("squash")]),s._v(" ，之后再提交即可")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge dev --squash\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("但是，该方法在合并的同时也会将作者信息修改为该行为的操作者，贡献者的信息将会消失，很明显这并不是一个比较好的解决方案")]),s._v(" "),t("p",[s._v("更常用的解决方案是使用 "),t("code",[s._v("rebase")]),s._v(" 来合并全部内容")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git checkout dev\ngit rebase -i master\ngit checkout master\ngit merge dev\ngit commit\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("这样不仅可以使得 commit history 清爽简洁，也会保留 PR 发起人重要的贡献信息")]),s._v(" "),t("h2",{attrs:{id:"团队协作模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#团队协作模式"}},[s._v("#")]),s._v(" 团队协作模式")]),s._v(" "),t("p",[s._v("团队协作应当不止建立 "),t("code",[s._v("master")]),s._v(" 与 "),t("code",[s._v("dev")]),s._v("，抛开额外的功能分支，每个人都应当从 "),t("code",[s._v("dev")]),s._v(" 建立自己的分支")]),s._v(" "),t("p",[t("code",[s._v("master")]),s._v(" 应当是一个相当稳定的分支，只有在 "),t("code",[s._v("dev")]),s._v(" 新功能基本稳定后，才合并回 "),t("code",[s._v("master")]),s._v(" 发版，团队各成员平时只允许向 "),t("code",[s._v("dev")]),s._v(" merge")]),s._v(" "),t("h3",{attrs:{id:"建立你自己的分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#建立你自己的分支"}},[s._v("#")]),s._v(" 建立你自己的分支")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout dev\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b feature/sigure     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建一个你自己的分支")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"完成你的工作，并发起-pr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#完成你的工作，并发起-pr"}},[s._v("#")]),s._v(" 完成你的工作，并发起 PR")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin feature/sigure\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("之后在 GitHub 上向 "),t("code",[s._v("dev")]),s._v(" 发起 PR 即可")]),s._v(" "),t("h3",{attrs:{id:"同步更改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#同步更改"}},[s._v("#")]),s._v(" 同步更改")]),s._v(" "),t("p",[s._v("由于你的 "),t("code",[s._v("master")]),s._v(" 与 "),t("code",[s._v("dev")]),s._v(" 都是相当干净（自己没做过改动）的，你可以和前面一样 "),t("code",[s._v("fetch")]),s._v(" 并 "),t("code",[s._v("merge")]),s._v(" 即可")]),s._v(" "),t("h1",{attrs:{id:"reference"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[s._v("#")]),s._v(" Reference")]),s._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/ldy-blogs/p/10529946.html#4416607",target:"_blank",rel:"noopener noreferrer"}},[s._v("Git 常用命令和 Git Flow 梳理"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.jianshu.com/p/684a8ae9dcf1",target:"_blank",rel:"noopener noreferrer"}},[s._v("git merge squash 和 rebase 区别"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);